CREATE TABLE stock_items (
    sku_id UUID PRIMARY KEY,
    product_id UUID,
    qty_on_hand INTEGER NOT NULL DEFAULT 0,
    reserved INTEGER NOT NULL DEFAULT 0,
    sellable BOOLEAN NOT NULL DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

CREATE TABLE processed_events (
    event_id UUID PRIMARY KEY,
    event_type VARCHAR(160) NOT NULL,
    processed_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

INSERT INTO stock_items (sku_id, product_id, qty_on_hand, reserved, sellable, created_at, updated_at) VALUES
    ('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 120, 5, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 80, 2, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000002', 60, 1, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000002', 45, 0, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000003', 200, 0, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000003', 150, 0, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000004', 90, 3, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000004', 70, 1, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000005', 55, 0, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000005', 40, 0, TRUE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000011', '00000000-0000-0000-0000-000000000006', 30, 0, FALSE, NOW(), NOW()),
    ('10000000-0000-0000-0000-000000000012', '00000000-0000-0000-0000-000000000006', 25, 0, FALSE, NOW(), NOW())
ON CONFLICT (sku_id) DO NOTHING;
